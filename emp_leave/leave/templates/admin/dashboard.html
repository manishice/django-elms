{% extends "layout.html" %}
{% block content %}
    <div class="wrapper">
        {% include "sidebar.html" %}
        <!-- Main Component -->
        <div class="main">
            {% include "admin/nav.html" %}
            <main class="content px-3 ">
                <div class="container-fluid">
                    <div class="mb-3">
                      <div class="container-fluid">
                        <div class="row g-3 my-2">
                          <div class="col-md-3">
                              <div class="card-view p-3 shadow-sm rounded">
                                  <div class="">
                                      <div class="card-title mb-3">
                                        <h5>Available Leave Types</h5>
                                      </div>
                                      <div class="card-value d-flex justify-content-between">
                                        <h2 class="d-flex align-items-center">{{leave_count.count}}</h2>
                                        <div class="icon">
                                          <i class="bi bi-suitcase-lg-fill" style="font-size: 25px"></i>
                                        </div>
                                      </div>
                                  </div>
                                </div>
                             </div>
      
                          <div class="col-md-3">
                            <div class="p-3 shadow-sm rounded card-view">
                                <div class="">
                                    <div class="card-title mb-3">
                                      <h5>Registered Employees</h5>
                                    </div>
                                    <div class="card-value d-flex justify-content-between">
                                      <h2 class="d-flex align-items-center">{{emp_details.count}}</h2>
                                      <div class="icon">
                                        <i class="bi bi-people-fill"></i>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>
      
                        <div class="col-md-3">
                          <div class="p-3 shadow-sm rounded card-view">
                              <div class="">
                                  <div class="card-title mb-3">
                                    <h5>Available Departments</h5>
                                  </div>
                                  <div class="card-value d-flex justify-content-between">
                                    <h2 class="d-flex align-items-center">{{dept_details.count}}</h2>
                                    <div class="icon">
                                      <i class="bi bi-grid-fill"></i>
                                    </div>
                                  </div>
                              </div>
                          </div>
                      </div>
      
                      <div class="col-md-3">
                        <div class="p-3 shadow-sm rounded card-view">
                            <div class="">
                                <div class="card-title mb-3">
                                  <h5>Active Employees</h5>
                                </div>
                                <div class="card-value d-flex justify-content-between">
                                  <h2 class="d-flex align-items-center">{{active_emp.count}}</h2>
                                  <div class="icon">
                                    <i class="bi bi-person-fill-check"></i>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                      <div class="p-3 shadow-sm rounded card-view">
                          <div class="">
                              <div class="card-title mb-3">
                                <h5>Pending Applications</h5>
                              </div>
                              <div class="card-value d-flex justify-content-between">
                                <h2 class="d-flex align-items-center">{{pending.count}}</h2>
                                <div class="icon">
                                  <i class="bi bi-hourglass-split"></i>
                                </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="col-md-3">
                    <div class="p-3 shadow-sm rounded card-view">
                        <div class="">
                            <div class="card-title mb-3">
                              <h5>Approved Applicatios</h5>
                            </div>
                            <div class="card-value d-flex justify-content-between">
                              <h2 class="d-flex align-items-center">{{approved.count}}</h2>
                              <div class="icon">
                                <i class="bi bi-check-circle-fill"></i>
                              </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div class="col-md-3">
                  <div class="p-3 shadow-sm rounded card-view">
                      <div class="">
                          <div class="card-title mb-3">
                            <h5>Declined Employees</h5>
                          </div>
                          <div class="card-value d-flex justify-content-between">
                            <h2 class="d-flex align-items-center">{{declined.count}}</h2>
                            <div class="icon">
                              <i class="bi bi-x-circle-fill"></i>
                            </div>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="col-md-3">
                <div class="p-3 shadow-sm rounded card-view">
                    <div class="">
                        <div class="card-title mb-3">
                          <h5>Inactive Employees</h5>
                        </div>
                        <div class="card-value d-flex justify-content-between">
                          <h2 class="d-flex align-items-center">{{inactive_emp.count}}</h2>
                          <div class="icon">
                            <i class="bi bi-person-fill-x"></i>
                          </div>
                        </div>
                    </div>
                  </div>
                </div>
                          
                      </div>
                        <div class="container mt-4">
                          <div class=" table-responsive">
                            <div class="table-title p-3 d-flex justify-content-between" >
                              <span class="d-flex align-items-center">Recent leaves</span>
                            </div>
                            <div class="table-container">
                          <table class="table text-center">
                              <thead class="table-head">
                                <tr>
                                  <th scope="col">SN</th>
                                  <th scope="col">EMP ID</th>
                                  <th scope="col">FULL NAME</th>
                                  <th scope="col">LEAVE TYPE</th>
                                  <th scope="col">APPLIED ON</th>
                                  <th scope="col">CURRENT STATUS</th>
                                  <th scope="col">ACTION</th>
                                </tr>
                              </thead>
                              <tbody class= "table-bordered">
                              {% for i in leave_details%}
                                <tr>
                                  <td scope="row">{{forloop.counter}}</td>
                                  <td>{{i.eid.eid}}</td>
                                  <td>{{i.eid.fname}} {{i.eid.lname}}</td>
                                  <td>{{i.leavetype}}</td>
                                  <td>{{i.request_date}}</td>
                                  <td>
                                    {% if i.status == 0%}
                                    <span class="pending">Pending <i class="bi bi-clock-history"></i></span>
                                    {% elif i.status == 1%}
                                    <span class="declined">Declined <i class="bi bi-x-circle"></i></span>
                                    {%else%}
                                    <span class="approved">Approved <i class="bi bi-check-circle"></i></span>
                                    {% endif %}
                                  </td>
                                  <td> <a href="{% url 'emp_leave_details' i.id %}"><span>view</span></a></td>
                                </tr>
                                {% endfor %}
                              
                              </tbody>
                   
                            </table>
                          </div>
                          </div>
                      
                      </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    {% endblock content %}